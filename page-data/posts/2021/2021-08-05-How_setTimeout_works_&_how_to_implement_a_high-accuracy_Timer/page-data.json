{
    "componentChunkName": "component---src-pages-custom-post-tsx",
    "path": "/posts/2021/2021-08-05-How_setTimeout_works_&_how_to_implement_a_high-accuracy_Timer/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"0908dfb2-505e-52e1-8672-63cae137173d","fields":{"slug":"/2021/2021-08-05-How_setTimeout_works_&_how_to_implement_a_high-accuracy_Timer/"},"html":"<h1>🤔 setTimeout의 동작 방식 &#x26; 정확도 높은 Timer를 구현하는 방법은?</h1>\n<h3><strong>1.</strong> setTimeout의 동작 방식</h3>\n<ol>\n<li>코드블록에서 해당 코드가 실행되면서 <strong>Call Stack</strong> 에 올라온다.</li>\n<li><strong>setTimeout</strong> 을 JS의 콜스택에서 실행한다.\n<ul>\n<li><strong>setTimeout</strong> 은 <strong>WEB API</strong> 이기에 넘겨짐.</li>\n</ul>\n</li>\n<li>JS의 콜스택에서는 setTimeout 에 관련된 <strong>액티브 레코드가 제거된다.</strong></li>\n<li>그리고 브라우저는 <strong>setTimeout</strong> 을 실행한다.</li>\n<li>현재는 JS의 콜스택과 QUEUE 에 아무것도 없으므로<br>\n<strong>EVENT LOOP는 무작정 어디에선가 일이 나오기만을 기다리면서 계속 돌고있는다 == 논블락</strong></li>\n<li>브라우저에서 등록된 setTImeout 실행을 끝냈다<br>\n그러면 해당 메서드에 전달됐던 <strong>Callback 이 Queue로 넘어간다.</strong></li>\n<li><strong>EVENT LOOP 는 런타임환경을 살펴보다 QUEUE 에 콜백 메서드가 들어온걸 발견했고 여기서 멈춤.</strong></li>\n<li>그리고 JS의 콜스택을 확인한다.<br>\n<strong>만약 콜스택에서 무언가 실행되고 있다면(비어있지 않다면) EVENT LOOP 는 QUEUE에 대기한채 기다리고 있는다.</strong></li>\n<li>JS의 콜스택이 비어졌다.<br>\n그러면 이제 EVENT LOOP 는 QUEUE 에 있는 콜백메서드를 <strong>JS의 콜스택으로 이동시킨다.</strong></li>\n<li>이동된 콜백메서드는 이제 실행이된다.</li>\n</ol>\n<h3><strong>2.</strong> 정확도 높은 Timer를 구현하는 방법은 뭐가 있을까..?</h3>\n<p>아무리 검색해도 잘 나오지 않는다… 😭</p>\n<ul>\n<li>내 생각 끄적끄적..\n<ul>\n<li><code class=\"language-text\">setInterval</code>을 활용하여 타이머를 구현 <em>(1000 ==> 1초)에 한번씩 돌아가도록</em></li>\n<li><code class=\"language-text\">setTimeout</code> 을 활용한 <code class=\"language-text\">sleep</code> 메소드 생성하여 처리\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">sleep</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">ms <span class=\"token operator\">=</span> <span class=\"token number\">1000</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> ms<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">exTimer</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">maxSec</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    nLoopSec <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>maxSec <span class=\"token operator\">></span> nLoopSec<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">await</span> <span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    nLoopSec<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>nLoopSec<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> maxSec <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 100초</span>\n<span class=\"token function\">exTimer</span><span class=\"token punctuation\">(</span>maxSec<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>추가\n<ul>\n<li><code class=\"language-text\">Date</code> 클래스를 사용하여 처리하는 것이 더 정확한 방법이란 말이 있음!!</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3>참고자료</h3>\n<ul>\n<li><a href=\"https://simian114.gitbook.io/blog/undefined/javascript/event-loop/settimeout\" target=\"_blank\" rel=\"nofollow\">setTimeout이 실행되면 어떤 동작이 일어날까?</a></li>\n</ul>","frontmatter":{"title":"[JavaScript] setTimeout의 동작 방식 & 정확도 높은 Timer를 구현하는 방법은?","summary":null,"date":"2021.08.05.","categories":["JavaScript"],"options":null,"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACC0lEQVQ4y+2STWgTURDHp9ukrek2NZsPm2b3zXYlgh49VLCCBUEPOdajZw/ivUeVilBpxfpFFErQIuhFFL8QD16LtRaxB4vZbfO5SRtitdloPjYjm1YNJQEpHn0MD96895v5z5uB78tsxwb/4X8HFzXLGo+GtiN4I2rtpRgrqMxQ/wI2fr/TGGVwI8rWFiUzjdU0bgaFpgkrCaZ/EI8d2XUy5Pj2Waom8dpFYX/QLvrbR0KOxTf91QQaWjPY0JiZxNhcwMlzCtrMFD6a9gJAf1/70GAnAJw+xZOOhtoCriYxMS8Ku7mgYiMdR886ASBy00OkPL/rTS2I5bglsCUcfyf2Oq3MpOOdCTcAHNhnf3DLU8pgLS8X1RY1F9Q/cHDAVohanpGQA+prr2x7NuOjTDPZhmr1oxzHlbd1WLF/XZIqaSzn5CcR3/GjXQDAd3Pzr/yURtj2z7UsJt+LlJOzn6TeHgs2VJb9KM296KOKQqYyesaqf/K8i/IyNKqlLN6+7Oa726bGhBuXBAAYGuysxNmhgx0d9rarF4SX9/cMH7aSz1z30FoDbKiMdHwc8fbw3GZ5HAcPwx7Ky+FxwVl3cvWbE8Nd60vSjxW2XTatYnQ2EB4XpsZcC6/9tfow0aqszQamr7gnzrme3vMVllk50axVRY1VU0hfZFqXTX1rDIsaM385KSeXYlsz/xOJuKXQ2JEzDwAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/db7933e6a7f7acaf99a33f39b286974b/34104/background_js.png","srcSet":"/static/db7933e6a7f7acaf99a33f39b286974b/5ce94/background_js.png 256w,\n/static/db7933e6a7f7acaf99a33f39b286974b/8a20a/background_js.png 512w,\n/static/db7933e6a7f7acaf99a33f39b286974b/34104/background_js.png 1024w","sizes":"(min-width: 1024px) 1024px, 100vw"},"sources":[{"srcSet":"/static/db7933e6a7f7acaf99a33f39b286974b/99d55/background_js.webp 256w,\n/static/db7933e6a7f7acaf99a33f39b286974b/3591c/background_js.webp 512w,\n/static/db7933e6a7f7acaf99a33f39b286974b/e306d/background_js.webp 1024w","type":"image/webp","sizes":"(min-width: 1024px) 1024px, 100vw"}]},"width":1024,"height":1024}},"publicURL":"/static/db7933e6a7f7acaf99a33f39b286974b/background_js.png"}}}}]}},"pageContext":{"slug":"/2021/2021-08-05-How_setTimeout_works_&_how_to_implement_a_high-accuracy_Timer/"}},
    "staticQueryHashes": ["1479751003","1642645631","3590156278","363963755","3949884163","77750267","884297919"]}