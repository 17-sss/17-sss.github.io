{
    "componentChunkName": "component---src-pages-custom-post-tsx",
    "path": "/posts/2021/2021-01-19-Closure/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"12f4b38c-4627-5226-99b7-c5d8f4148c80","fields":{"slug":"/2021/2021-01-19-Closure/"},"html":"<h1>Closure</h1>\n<h2>- 정의</h2>\n<ol>\n<li>클로저는 함수와 함수가 선언된 어휘적 환경의 조합.</li>\n<li>클로저를 이해하려면 자바스크립트가 어떻게 변수의 유효범위를 지정하는지(Lexical scoping)를 먼저 이해해야.</li>\n</ol>\n</br>\n<h3>1. 어휘적 범위 지정(Lexical scoping)</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Mozilla'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// name은 init에 의해 생성된 지역 변수이다.</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">printName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// printName() 은 내부 함수이며, 클로저다.</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 부모 함수에서 선언된 변수(name)를 사용한다.</span>\n        <span class=\"token comment\">// + 만약 printName()가 자신만의 name변수를 가지고 있었다면, name대신 this.name을 사용했을 것</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">printName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>위 코드를 실행하면 printName() 함수 내의 console.log()문이 부모 함수에서 정의한 변수 name의 값을 성공적으로 출력함.</li>\n<li>이 예시를 통해 함수가 중첩된 상황에서 파서가 어떻게 변수를 처리하는지 알 수 있다.<br>\n이는 어휘적 범위 지정(lexical scoping)의 한 예다.</li>\n<li><strong>lexical ?</strong><br>\n어휘적 범위 지정(lexical scoping) 과정에서 변수가 어디에서 사용 가능한지 알기 위해 그 변수가 소스코드 내 어디에서 선언되었는지 고려한다는 것을 의미</li>\n<li>중첩된 함수는 외부 범위(scope)에서 선언한 변수에도 접근할 수 있다.</li>\n</ul>\n</br>\n<h3>2. 클로저(Closure)</h3>\n<h4><strong>1)</strong> 예시 1</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">makeFunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Mozilla'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">printName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> printName<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> myFunc <span class=\"token operator\">=</span> <span class=\"token function\">makeFunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// myFunc변수에 printName 리턴함</span>\n<span class=\"token comment\">// 유효범위의 어휘적 환경을 유지</span>\n<span class=\"token function\">myFunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 리턴된 printName 함수를 실행 (name 변수에 접근)</span></code></pre></div>\n<ul>\n<li>몇몇 프로그래밍 언어에서, 함수 안의 지역 변수들은 그 함수가 처리되는 동안에만 존재.<br>\nmakeFunc() 실행이 끝나면 (printName 리턴되고 나면)<br>\nname 변수에 더 이상 접근할 수 없게 될 것으로 예상하는 것이 일반적.</li>\n<li>자바스크립트의 경우엔 다름.\n<ol>\n<li>자바스크립트는 함수를 리턴하고, 리턴하는 함수가 클로저를 형성하기 때문.</li>\n<li>클로저는 함수와 함수가 선언된 어휘적 환경의 조합이다.</li>\n<li>클로저가 생성된 시점의 유효 범위 내에 있는 모든 지역 변수로 구성된다.</li>\n</ol>\n</li>\n</ul>\n<h4><strong>2)</strong> 예시 2</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">makeAdder</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> y <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">z</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        y <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y <span class=\"token operator\">+</span> z<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> add5 <span class=\"token operator\">=</span> <span class=\"token function\">makeAdder</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> add10 <span class=\"token operator\">=</span> <span class=\"token function\">makeAdder</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//클로저에 x와 y의 환경이 저장됨</span>\n<span class=\"token comment\">/* \n    ▶ add5, add10 둘 다 리턴 시, makeAdder의 리턴 값은 함수. (return function (z) {})\n        - function (z) {} 안까지는 접근한게 아니라 보는게 맞을 듯.\n        - 매개변수 x 값은 저장되어 있는 상태겠지 add5, add10은.\n*/</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add5</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 107 (x:5 + y:100 + z:2)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add10</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 112 (x:10 + y:100 + z:2)</span>\n<span class=\"token comment\">//함수 실행 시 클로저에 저장된 x, y값에 접근하여 값을 계산</span>\n<span class=\"token comment\">/* \n    ▶ add5, add10를 실행하려면 function (z) {} 이니까,\n        z값을 인자로 보내주면, function (z) {} 안에 있는 리턴 값이 나올 것.        \n*/</span></code></pre></div>\n<ul>\n<li>add5와 add10은 둘 다 클로저.\n<ul>\n<li>이들은 같은 함수 본문 정의를 공유하지만 서로 다른 맥락(어휘)적 환경을 저장한다.</li>\n<li>함수 실행 시 add5의 맥락적 환경에서 클로저 내부의 x는 5 이지만 add10의 맥락적 환경에서 x는 10이다.<br>\n또한 리턴되는 함수에서 초기값이 1로 할당된 y에 접근하여 y값을 100으로 변경한 것을 볼 수 있다. (x값도 동일하게 변경 가능하다.)</li>\n<li>이는 클로저가 리턴된 후에도 <strong>외부함수의 변수들에 접근 가능하다는 것을 보여주는 포인트</strong>이며<br>\n클로저에 <strong>단순히 값 형태로 전달되는 것이 아니라는 것</strong>을 의미.</li>\n</ul>\n</li>\n</ul>\n<h4><strong>3)</strong> 이게 맞는 걸까? 혼자 짜보는 코드</h4>\n<ul>\n<li>이 로직은 어떻게 돌아가는 걸까? (화살표 함수를 이용해서 한번 만들어봄)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 이 로직은 이렇게 돌아가는 걸까?</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">testFunc</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">y</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">z</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">+</span> y <span class=\"token operator\">+</span> z<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//  \t\t\t|--1--|</span>\n<span class=\"token comment\">//         \t\t        |--2--|</span>\n<span class=\"token comment\">//                \t\t\t  |---------3---------|</span>\n\n<span class=\"token keyword\">let</span> testX <span class=\"token operator\">=</span> <span class=\"token function\">testFunc</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// - 위 1번 구간</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'testX: '</span><span class=\"token punctuation\">,</span> testX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// testX:  [Function (anonymous)]</span>\n\n<span class=\"token keyword\">let</span> testY <span class=\"token operator\">=</span> <span class=\"token function\">testX</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// - 위 2번 구간</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'testY: '</span><span class=\"token punctuation\">,</span> testY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// testY:  [Function (anonymous)]</span>\n\n<span class=\"token keyword\">let</span> testZ <span class=\"token operator\">=</span> <span class=\"token function\">testY</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// - 위 3번 구간</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'testZ: '</span><span class=\"token punctuation\">,</span> testZ<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// testZ:  6</span></code></pre></div>\n<ul>\n<li>이렇게 이해한게 맞는건가. 잘모르겠다.</li>\n</ul>\n<hr/>\n<h3><strong>참고 링크</strong></h3>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Guide/Closures\" target=\"_blank\" rel=\"nofollow\">클로저 - MDN</a></li>\n</ul>","frontmatter":{"title":"[JavaScript] 클로저","summary":null,"date":"2021.01.19.","categories":["JavaScript"],"options":null,"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACC0lEQVQ4y+2STWgTURDHp9ukrek2NZsPm2b3zXYlgh49VLCCBUEPOdajZw/ivUeVilBpxfpFFErQIuhFFL8QD16LtRaxB4vZbfO5SRtitdloPjYjm1YNJQEpHn0MD96895v5z5uB78tsxwb/4X8HFzXLGo+GtiN4I2rtpRgrqMxQ/wI2fr/TGGVwI8rWFiUzjdU0bgaFpgkrCaZ/EI8d2XUy5Pj2Waom8dpFYX/QLvrbR0KOxTf91QQaWjPY0JiZxNhcwMlzCtrMFD6a9gJAf1/70GAnAJw+xZOOhtoCriYxMS8Ku7mgYiMdR886ASBy00OkPL/rTS2I5bglsCUcfyf2Oq3MpOOdCTcAHNhnf3DLU8pgLS8X1RY1F9Q/cHDAVohanpGQA+prr2x7NuOjTDPZhmr1oxzHlbd1WLF/XZIqaSzn5CcR3/GjXQDAd3Pzr/yURtj2z7UsJt+LlJOzn6TeHgs2VJb9KM296KOKQqYyesaqf/K8i/IyNKqlLN6+7Oa726bGhBuXBAAYGuysxNmhgx0d9rarF4SX9/cMH7aSz1z30FoDbKiMdHwc8fbw3GZ5HAcPwx7Ky+FxwVl3cvWbE8Nd60vSjxW2XTatYnQ2EB4XpsZcC6/9tfow0aqszQamr7gnzrme3vMVllk50axVRY1VU0hfZFqXTX1rDIsaM385KSeXYlsz/xOJuKXQ2JEzDwAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/db7933e6a7f7acaf99a33f39b286974b/34104/background_js.png","srcSet":"/static/db7933e6a7f7acaf99a33f39b286974b/5ce94/background_js.png 256w,\n/static/db7933e6a7f7acaf99a33f39b286974b/8a20a/background_js.png 512w,\n/static/db7933e6a7f7acaf99a33f39b286974b/34104/background_js.png 1024w","sizes":"(min-width: 1024px) 1024px, 100vw"},"sources":[{"srcSet":"/static/db7933e6a7f7acaf99a33f39b286974b/99d55/background_js.webp 256w,\n/static/db7933e6a7f7acaf99a33f39b286974b/3591c/background_js.webp 512w,\n/static/db7933e6a7f7acaf99a33f39b286974b/e306d/background_js.webp 1024w","type":"image/webp","sizes":"(min-width: 1024px) 1024px, 100vw"}]},"width":1024,"height":1024}},"publicURL":"/static/db7933e6a7f7acaf99a33f39b286974b/background_js.png"}}}}]}},"pageContext":{"slug":"/2021/2021-01-19-Closure/"}},
    "staticQueryHashes": ["1642645631","2183628444","3590156278","363963755","3949884163","77750267","884297919"]}