{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/posts/2021/2021-07-30-[Tech_Article]_React_프로젝트_컴포넌트_구성/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>📃 React 프로젝트 컴포넌트 구성</h1>\n<p>항상 React 프로젝트를 할 때 컴포넌트 구성에 대해 많은 고민이 있었다.<br>\n또한 나중에 하게 될 <code class=\"language-text\">Next.js</code>의 규칙을 조금은 알 수 있다고 생각하여 정리.</p>\n<p><strong>이 글에서의 말..</strong></p>\n<ul>\n<li>프로젝트가 시작된지 얼마 되지 않은 경우에 소스는 비교적 일관성을 가지고 있음.<br>\n하지만, 시간이 지남에 따라 여러 사람이 참여하고,<br>\n비슷한 새로운 프로젝트가 만들어지면서 점점 일관성이 떨어지게 됨.<br>\n(문서나 리뷰 과정이 있으면 비교적 낫지만, 완전히 방지하기는 어려움)</li>\n<li>React 자체는 UI 구성을 위한 <strong>라이브러리</strong> 이기 때문에 구성에 아무 제약이 없음<br>\n하지만 이 글을 쓴 카카오스타일은..\n<ul>\n<li>일부 프로젝트에서는 <code class=\"language-text\">Next.js</code>를 쓰고 있음, 이는 <strong>프레임워크</strong> 이기에 여러가지 규칙이 있음.</li>\n</ul>\n</li>\n</ul>\n<h2><strong>[1]</strong> 라우트</h2>\n<p><code class=\"language-text\">Next.js</code>에서는 라우트를 <strong>pages</strong> 디렉토리에서 정하고 있음.<br>\n이 글의 저자의 회사는 <strong>pages</strong>를 프로젝트 루트에 두지 않고, <em><code class=\"language-text\">src</code> 밑에 모아두는 것을 선택</em></p>\n<p><code class=\"language-text\">Next.js</code>가 아닌 일반 React 프로젝트에서도 마찬가지로 <strong>pages</strong> 밑에 두지만,<br>\n라우트 연결은 수동으로 해야 함</p>\n<p><strong>예시) 비 Next.js 프로젝트에서의 라우터 설정 예</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> BrowserRouter <span class=\"token keyword\">as</span> Router<span class=\"token punctuation\">,</span> Switch<span class=\"token punctuation\">,</span> Route <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> HomePage <span class=\"token keyword\">from</span> <span class=\"token string\">'pages'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> LoginPage <span class=\"token keyword\">from</span> <span class=\"token string\">'pages/login'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> SignupPage <span class=\"token keyword\">from</span> <span class=\"token string\">'pages/signup'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> QnaQuestionMainPage <span class=\"token keyword\">from</span> <span class=\"token string\">'pages/qna/questions'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> QnaQuestionNewPage <span class=\"token keyword\">from</span> <span class=\"token string\">'pages/qna/questions/new'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> QnaQuestionDetailPage <span class=\"token keyword\">from</span> <span class=\"token string\">'pages/qna/questions/[question_id]'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ChatRoomMainPage <span class=\"token keyword\">from</span> <span class=\"token string\">'pages/chat/rooms'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ChatRoomDetailPage <span class=\"token keyword\">from</span> <span class=\"token string\">'pages/chat/rooms/[room_id]'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">HomePage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/login<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LoginPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/signup<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SignupPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/qna/questions<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">QnaQuestionMainPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/qna/questions/new<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">QnaQuestionNewPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/qna/questions/:question_id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">QnaQuestionDetailPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/chat/rooms<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ChatRoomMainPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/chat/rooms/:room_id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ChatRoomDetailPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">Next.js</code>에서는 같은 위치에 페이지 파일이 있으면 자동으로 라우트 설정이 됨.</li>\n</ul>\n<h2><strong>[2]</strong> 페이지를 실제 구성하는 컴포넌트</h2>\n<p>간단한 뷰는 페이지 파일에 넣을 수 있겠지만 복잡한 경우 여러 컴포넌트로 나누어야 함.<br>\n이를 <strong>pages</strong> 밑에 두면 <code class=\"language-text\">Next.js</code> <u>라우트로 인식</u> 되므로 별개의 위치에 둬야 함!</p>\n<p>따라서 이를 <strong>components</strong> 디렉토리에 두기로 하고<br>\n이때 RESTful한 주소를 갖도록 위치한 페이지와 달리 도메인별로 묶어서 구성</p>\n<ul>\n<li><strong>QnaQuestionMainPage</strong> (<code class=\"language-text\">/pages/qna/questions/index.tsx</code>)에 대응하는 컴포넌트는<br>\n<code class=\"language-text\">/components/qna/question/main/index.tsx</code>에 위치.<br>\n(컴포넌트명은 <strong>QnaQuestionMain</strong>)</li>\n<li><strong>ChatRoomDetailPage</strong> (<code class=\"language-text\">/pages/chat/rooms/[room_id]/index.tsx</code>)에 대응하는 컴포넌트는<br>\n<code class=\"language-text\">/components/chat/room/detail/index.tsx</code>에 위치<br>\n(컴포넌트명은 <strong>ChatRoomDetail</strong>)</li>\n</ul>\n<p>파일명을 컴포넌트 이름과 일치시킬지 여부를 내부에서 논의할 결과 진입점은 <code class=\"language-text\">index.tsx</code>로 통일.</p>\n<p><strong>예시) QnaQuestionMainPage의 구조</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">FC</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> QnaQuestionMain <span class=\"token keyword\">from</span> <span class=\"token string\">'components/qna/question/main'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> QnaQuestionMainPage<span class=\"token operator\">:</span> <span class=\"token function-variable function\">FC</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">QnaQuestionMain</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> QnaQuestionMainPage<span class=\"token punctuation\">;</span></code></pre></div>\n<h2><strong>[3]</strong> 데이터 가져오기</h2>\n<p>Next.js 프로젝트와 비 Next.js 프로젝트는 데이터를 가져오는 시점이 다름.</p>\n<ul>\n<li><code class=\"language-text\">Next.js</code>는 클라이언트에 내보내기 전에 React와 무관하게 데이터를 가져옴.</li>\n<li><code class=\"language-text\">비 Next.js</code> 프로젝트는 클라이언트 로딩이 끝난 후 데이터를 가져와야 함.</li>\n</ul>\n<p>어느 경우에든 비슷하게 구성하기 위해 데이터 가져오는 것을 <code class=\"language-text\">fetchData</code>라는<br>\n함수로 분리하여 컴포넌트쪽에 두고, 각 컴포넌트는 상위 페이지로 부터 데이터를 props로 받아옴.<br>\n이렇게 구성하면..?</p>\n<ul>\n<li>장점: 컴포넌트에 대한 <strong>스토리북</strong> 구성시 <u>데이터를 다르게 부여하기 편하다</u></li>\n<li>단점: 데이터가 고정이 아닌 경우(정렬 옵션등에 의해 페이지 이동 없이 바뀌어야 하는 경우),<br>\n<u>상위 페이지로 이를 전달하는 방법을 고민해 봐야</u> 한다는 점</li>\n</ul>\n<p><strong>예시) 위 규칙에 따라 작성된 컴포넌트 내용</strong></p>\n<p><code class=\"language-text\">QnaQuestionMain.tsx</code> (컴포넌트)</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Question</span> <span class=\"token punctuation\">{</span>\n  id<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  title<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  date<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{</span>\n  total_count<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  question_list<span class=\"token operator\">:</span> Question<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> QnaQuestionMain<span class=\"token operator\">:</span> <span class=\"token constant\">FC</span><span class=\"token operator\">&lt;</span>Props<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>question_list<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">question</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">QuestionView</span></span> <span class=\"token attr-name\">question</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>question<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>question<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> QnaQuestionMain<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">context<span class=\"token operator\">:</span> GetServerSidePropsContext <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span></span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>Props<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    total_count<span class=\"token operator\">:</span> result<span class=\"token punctuation\">.</span>total_count<span class=\"token punctuation\">,</span>\n    question_list<span class=\"token operator\">:</span> result<span class=\"token punctuation\">.</span>question_list<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">QnaQuestionMainPage.tsx</code> (페이지 / Next.js 프로젝트)</p>\n<p>페이지의 <code class=\"language-text\">getServerSideProps</code> 메소드에서 컴포넌트에서 만든 <code class=\"language-text\">fetchData</code>를 호출</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">{</span> GetServerSideProps <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'next'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> QnaQuestionMain<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> fetchData<span class=\"token punctuation\">,</span> Props <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'components/qna/question/main'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> getServerSideProps<span class=\"token operator\">:</span> GetServerSideProps<span class=\"token operator\">&lt;</span>Props<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">context</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    props<span class=\"token operator\">:</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> QnaQuestionMainPage<span class=\"token operator\">:</span> <span class=\"token constant\">FC</span><span class=\"token operator\">&lt;</span>Props<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">QnaQuestionMain</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> QnaQuestionMainPage<span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">QnaQuestionMainPage.tsx</code> (페이지 / <strong>비</strong> Next.js 프로젝트)</p>\n<p>페이지의 <code class=\"language-text\">useEffect</code> 안에서 <code class=\"language-text\">fetchData</code>를 호출</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> QnaQuestionMain<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> fetchData<span class=\"token punctuation\">,</span> Props <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'components/qna/question/main'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> QnaQuestionMainPage<span class=\"token operator\">:</span> <span class=\"token function-variable function\">FC</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">,</span> setProps<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Props<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    total_count<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    question_list<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">run</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setProps</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">QnaQuestionMain</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> QnaQuestionMainPage<span class=\"token punctuation\">;</span></code></pre></div>\n<h2><strong>[4]</strong> 자잘한 규칙</h2>\n<p><strong>1.</strong> 컴포넌트를 내보낼 때는 <code class=\"language-text\">default export</code>를 사용</p>\n<ul>\n<li>장점: 내부적으로 컴포넌트 이름을 바꿔도 사용하는 쪽에 영향이 없다.</li>\n<li>단점\n<ul>\n<li>정의하는 쪽과 사용하는 쪽의 이름을 다르게 줄 수 있어서 찾기 어려워짐!</li>\n<li>스토리북에서 컴포넌트 Props를 제대로 인식하지 못하는 작은 문제가 있음</li>\n</ul>\n</li>\n</ul>\n<p><strong>2.</strong> 상대 경로와 절대 경로를 참조해야 할 경우</p>\n<ul>\n<li>상대 경로 참조\n<ul>\n<li>한 페이지 컴포넌트를 작게 쪼갠 경우 (가까울 경우)</li>\n</ul>\n</li>\n<li>절대 경로 참조\n<ul>\n<li>멀리 떨어진 컴포넌트를 참조할 경우<br>\n(<strong>pages</strong> 에서 <strong>components</strong> 까지 간다던가..)</li>\n</ul>\n</li>\n<li>이렇게 구성해야 파일을<br>\n<code class=\"language-text\">/pages/qna/questions/index.tsx</code> -> <code class=\"language-text\">/pages/questions/index.tsx</code>로 옮겨도<br>\nimport 변경이 필요 없음.</li>\n</ul>\n<p><strong>+</strong> 절대 경로 세팅할 때 참고 (with Craco)</p>\n<ul>\n<li><code class=\"language-text\">@/components/qna/question/main</code> 처럼 앞에 <code class=\"language-text\">@/</code>가 붙는 형태<br>\n(<code class=\"language-text\">@/*</code> 라는 글자를 <code class=\"language-text\">src/*</code> 로만 지정해주면 됨)</li>\n<li><code class=\"language-text\">components/components/qna/question/main</code> 처럼 앞에 특정 폴더들이 붙는 형태<br>\n(절대 경로로 쓰고자하는 폴더들을 설정해주면 됨)</li>\n<li>이 글 저자의 회사는.. 2번째꺼를 사용하고 있다함!</li>\n</ul>\n<hr>\n<h3>참고자료</h3>\n<ul>\n<li><a href=\"https://devblog.croquis.com/ko/2021-07-29-1-react-component-organization/\" target=\"_blank\" rel=\"nofollow\">kakao style : React 프로젝트 컴포넌트 구성</a></li>\n</ul>","frontmatter":{"title":"[Tech Article] React 프로젝트 컴포넌트 구성","summary":null,"date":"2021.07.30.","categories":["Tech Article"],"options":null,"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMJBf/EABYBAQEBAAAAAAAAAAAAAAAAAAAFBv/aAAwDAQACEAMQAAAB2O58M9Jm22QSU8TWIWB//8QAHBAAAgEFAQAAAAAAAAAAAAAAAgYEAAEDBQcQ/9oACAEBAAEFAnd0wJcVN6HpXMK6Go5GuBl1s6E3ANgGiAC8/8QAGxEAAgMAAwAAAAAAAAAAAAAAAgMBBAUQEyP/2gAIAQMBAT8Bx8DM28yIrWoVrV02rF0GMWAgpVlQKMIsMrqYEof2MhbCZ4kIQTZhR8//xAAcEQABBAMBAAAAAAAAAAAAAAACAQMEERITIRD/2gAIAQIBAT8BOVKbn6CYuIbGxuSl0jok2JMFSFRFmphljwC4SWQe/wD/xAAmEAACAgIBAgUFAAAAAAAAAAABAgMEERIFEyEAEBQiIwYxMkFR/9oACAEBAAY/AqFmaha5D1101Fhq9Pqe2F5SfkdckkKqgK37LagZ8BabCpfQObPGWpB6lQD7XrMq9G7CR3kkhb4SQrpk+VFa1oV7vH3DZqxyKzQW5DBLH6eV12NbbOwsBHCkBXUggrbrv9OXW5KTm+HevyaDlEn4+FHp9Rq60s1LMdmNWzLM7rHHsVwc4VBnCgKNmZ2wOw2dyzuf6zEs33JJ8lLKrFG2TYA6t3Gy5/FsEjI79z5f/8QAGRABAQADAQAAAAAAAAAAAAAAAREAIUEQ/9oACAEBAAE/IVO7FIimmkLvUU7Dc5o70g5Op4AVCdALhPGBZ3jh4Uz1UovG8oQ1hoNEBAryvFcVLAypgTPAOAsXz//aAAwDAQACAAMAAAAQDMcA/8QAFhEAAwAAAAAAAAAAAAAAAAAAAREg/9oACAEDAQE/EAiQfp8eSx8Tn//EABYRAQEBAAAAAAAAAAAAAAAAAAERIP/aAAgBAgEBPxBG9Qhwa4NFJlBi/wD/xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAQIf/aAAgBAQABPxD1eBCluIyyPXqrRa943PM8isElBwaaDGUY1PnFQ3+Pe8LEeJKzLZjize8LpeOldqJQ6WbKd//Z"},"images":{"fallback":{"src":"/static/82e255e22d8f11f3dc5ee1a69318a5a1/8938a/background_tech_article.jpg","srcSet":"/static/82e255e22d8f11f3dc5ee1a69318a5a1/936b0/background_tech_article.jpg 90w,\n/static/82e255e22d8f11f3dc5ee1a69318a5a1/55343/background_tech_article.jpg 180w,\n/static/82e255e22d8f11f3dc5ee1a69318a5a1/8938a/background_tech_article.jpg 360w","sizes":"(min-width: 360px) 360px, 100vw"},"sources":[{"srcSet":"/static/82e255e22d8f11f3dc5ee1a69318a5a1/be9e0/background_tech_article.webp 90w,\n/static/82e255e22d8f11f3dc5ee1a69318a5a1/e8c26/background_tech_article.webp 180w,\n/static/82e255e22d8f11f3dc5ee1a69318a5a1/6d50c/background_tech_article.webp 360w","type":"image/webp","sizes":"(min-width: 360px) 360px, 100vw"}]},"width":360,"height":360}},"publicURL":"/static/82e255e22d8f11f3dc5ee1a69318a5a1/background_tech_article.jpg"}}}}]}},"pageContext":{"slug":"/2021/2021-07-30-[Tech_Article]_React_프로젝트_컴포넌트_구성/"}},
    "staticQueryHashes": []}