{
    "componentChunkName": "component---src-pages-custom-post-tsx",
    "path": "/posts/2021/2021-08-06-Singleton/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"01673b52-3f54-50bd-aa0a-929ccdbe2aa2","fields":{"slug":"/2021/2021-08-06-Singleton/"},"html":"<div>\n    <center>\n        <br>\n        <p>이번주에 처음 듣는 단어가 나왔다..  싱글톤?</p>\n        <p>그게 대체 무엇일까?\n        </p><p><del>(분명 예전에 배웠는데 제대로 안들었겠지 🤪)</del></p>\n        <br>\n    </center>\n    <div>\n        <center>\n            <img src=\"https://user-images.githubusercontent.com/33610315/128531560-82670502-b1f4-4bb7-9e61-ab2864d6885e.png\" width=\"400/\">\n            <h2>다들...</h2>\n            <img src=\"https://user-images.githubusercontent.com/33610315/128532568-9f97aaef-c9df-4b9c-9fa7-af39758ebcfa.png\" width=\"200/\">\n            <br><br>\n            <p>\n                <strong>장난은 그만하고.. 정리를 해보자!</strong>\n            </p>\n        </center>\n    </div>\n</div>\n<h1>🤔 싱글톤?</h1>\n<h2><strong>[1]</strong> 싱글톤이란?</h2>\n<blockquote>\n<p>애플리케이션이 시작될 때 어떤 클래스가 <strong>최초 한번만</strong> 메모리를 할당하고(Static)<br>\n그 메모리에 인스턴스를 만들어 사용하는 디자인패턴.</p>\n</blockquote>\n<ul>\n<li><strong>싱글톤 패턴은 전체 시스템에서 하나의 인스턴스만 존재하도록 보장하는 객체 생성패턴</strong><br>\n(동일 클래스로 new 를 해도 <u>인스턴스 하나만</u> 존재한다는 것)</li>\n<li>생성자가 여러 차례 호출되더라도 실제로 생성되는 객체는 하나고 최초 생성 이후에<br>\n호출된 생성자는 최초에 생성한 객체를 반환한다.</li>\n<li>싱글톤 패턴은 단 하나의 인스턴스를 생성해 사용하는 디자인 패턴\n<ul>\n<li>인스턴스가 필요 할 때 똑같은 인스턴스를 만들어 내는 것이 아니라,<br>\n동일(기존) 인스턴스를 사용하게 함</li>\n</ul>\n</li>\n</ul>\n<h2><strong>[2]</strong> 이 패턴을 쓰는 이유?</h2>\n<ul>\n<li>고정된 메모리 영역을 얻으면서 한번의 <code class=\"language-text\">new</code>로 인스턴스를 사용하기 때문에 메모리 낭비를 방지할 수 있음</li>\n<li><u>싱글톤</u>으로 만들어진 클래스의 <u>인스턴스는 전역 인스턴스</u>이기 때문에<br>\n<strong>다른 클래스의 인스턴스들이 데이터를 공유하기 쉬움</strong>.</li>\n<li><a href=\"https://blue-mina.tistory.com/19\" target=\"_blank\" rel=\"nofollow\">DBCP(DataBase Connection Pool)</a>처럼 <u>공통된 객체를 여러개 생성해서 사용해야하는 상황</u>에서 많이 사용.\n<ul>\n<li><em>DBCP 정의</em> - 데이터베이스와 애플리케이션을 효율적으로 연결하는 <strong>커넥션 풀 라이브러리</strong></li>\n<li>쓰레드풀, 캐시, 대화상자, 사용자 설정, 레지스트리 설정, 로그 기록 객체 등</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>인스턴스가 절대적으로 <strong>한 개</strong>만 존재하는 것을 보증하고 싶을 경우 사용<br>\n두 번째 이용시부터는 <u>객체 로딩시간이 현저히 줄어듬</u>!!</p>\n</blockquote>\n<h2><strong>[3]</strong> 이 패턴의 문제점</h2>\n<ul>\n<li>싱글톤 인스턴스가 너무 많은 일을 하거나 많은 데이터를 공유시킨다면?<br>\n다른 클래스의 인스턴스들 간에 결합도가 높아져서 **“개방-폐쇄 원칙”**을 위배하게 된다.<br>\n(객체 지향 설계 원칙에 어긋남)</li>\n<li>멀티쓰레드 환경에서 동기화 처리 안하면 인스턴스가 두 개 생성될수도..?<br>\n(자바에서만 그럴려나..? 자바스크립트는 어떻게 될까?)</li>\n</ul>\n<h2><strong>[4]</strong> 예시 코드 끄적끄적 🤪</h2>\n<ul>\n<li>\n<p><code class=\"language-text\">closure</code> 활용하여 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> Singleton <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> instance<span class=\"token punctuation\">;</span> <span class=\"token comment\">//\t비공개 변수</span>\n\n  <span class=\"token comment\">// 비공개 메서드 (init)</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// public 메서드</span>\n      <span class=\"token function-variable function\">getRanoBabo</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">RANO IS 1000 JAE</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// public 속성</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'RANO SINGLETON'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">//  public 메서드인 sharedInstance 를 정의한 객체</span>\n  <span class=\"token comment\">//\t이 메서드를 통해 비공개된 메서드와 변수에 접근 가능 (closure)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">sharedInstance</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>instance<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        instance <span class=\"token operator\">=</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> Singleton<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ======</span>\n\n<span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> Singleton<span class=\"token punctuation\">.</span><span class=\"token function\">sharedInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> b <span class=\"token operator\">=</span> Singleton<span class=\"token punctuation\">.</span><span class=\"token function\">sharedInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">===</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span><span class=\"token function\">getRanoBabo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p><strong>ES7</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">static</span> #instance<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Singleton<span class=\"token punctuation\">.</span>#instance<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> Singleton<span class=\"token punctuation\">.</span>#instance<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'RANO SINGLETON ES7'</span><span class=\"token punctuation\">;</span>\n    Singleton<span class=\"token punctuation\">.</span>#instance <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">static</span> <span class=\"token function-variable function\">sharedInstance</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Singleton<span class=\"token punctuation\">.</span>#instance<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> Singleton<span class=\"token punctuation\">.</span>#instance<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function-variable function\">getRanoBabo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">RANO IS 1000 JAE</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Singleton<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ======</span>\n\n<span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> Singleton<span class=\"token punctuation\">.</span><span class=\"token function\">sharedInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> b <span class=\"token operator\">=</span> Singleton<span class=\"token punctuation\">.</span><span class=\"token function\">sharedInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">===</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span><span class=\"token function\">getRanoBabo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>역시 난.. class 문법이 편해..</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3>참고자료</h3>\n<ul>\n<li><a href=\"https://jeong-pro.tistory.com/86\" target=\"_blank\" rel=\"nofollow\">싱글톤 패턴(Singleton pattern)을 쓰는 이유와 문제점</a></li>\n<li><a href=\"https://heecheolman.tistory.com/40\" target=\"_blank\" rel=\"nofollow\">[Javascript] Singleton Pattern 싱글톤 패턴</a></li>\n<li><a href=\"https://techbless.github.io/2020/06/09/ES7-%EC%9D%B4%EC%83%81%EC%9D%98-TypeScript%EC%99%80-JavaScript%EC%97%90%EC%84%9C-Singleton-%ED%8C%A8%ED%84%B4%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%93%B8%EA%B9%8C/\" target=\"_blank\" rel=\"nofollow\">ES7 이상의 TypeScript와 JavaScript에서 Singleton 패턴은 어떻게 쓸까?</a></li>\n<li><strong>추후 참고</strong>: <a href=\"https://blog.naver.com/good_ray/222069343755\" target=\"_blank\" rel=\"nofollow\">Java: 클래스, 객체, 인스턴스 차이 구분</a></li>\n</ul>","frontmatter":{"title":"[JavaScript] 싱글톤","summary":"야너두? 야나두~! 싱글!","date":"2021.08.06.","categories":["JavaScript"],"options":null,"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACC0lEQVQ4y+2STWgTURDHp9ukrek2NZsPm2b3zXYlgh49VLCCBUEPOdajZw/ivUeVilBpxfpFFErQIuhFFL8QD16LtRaxB4vZbfO5SRtitdloPjYjm1YNJQEpHn0MD96895v5z5uB78tsxwb/4X8HFzXLGo+GtiN4I2rtpRgrqMxQ/wI2fr/TGGVwI8rWFiUzjdU0bgaFpgkrCaZ/EI8d2XUy5Pj2Waom8dpFYX/QLvrbR0KOxTf91QQaWjPY0JiZxNhcwMlzCtrMFD6a9gJAf1/70GAnAJw+xZOOhtoCriYxMS8Ku7mgYiMdR886ASBy00OkPL/rTS2I5bglsCUcfyf2Oq3MpOOdCTcAHNhnf3DLU8pgLS8X1RY1F9Q/cHDAVohanpGQA+prr2x7NuOjTDPZhmr1oxzHlbd1WLF/XZIqaSzn5CcR3/GjXQDAd3Pzr/yURtj2z7UsJt+LlJOzn6TeHgs2VJb9KM296KOKQqYyesaqf/K8i/IyNKqlLN6+7Oa726bGhBuXBAAYGuysxNmhgx0d9rarF4SX9/cMH7aSz1z30FoDbKiMdHwc8fbw3GZ5HAcPwx7Ky+FxwVl3cvWbE8Nd60vSjxW2XTatYnQ2EB4XpsZcC6/9tfow0aqszQamr7gnzrme3vMVllk50axVRY1VU0hfZFqXTX1rDIsaM385KSeXYlsz/xOJuKXQ2JEzDwAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/db7933e6a7f7acaf99a33f39b286974b/34104/background_js.png","srcSet":"/static/db7933e6a7f7acaf99a33f39b286974b/5ce94/background_js.png 256w,\n/static/db7933e6a7f7acaf99a33f39b286974b/8a20a/background_js.png 512w,\n/static/db7933e6a7f7acaf99a33f39b286974b/34104/background_js.png 1024w","sizes":"(min-width: 1024px) 1024px, 100vw"},"sources":[{"srcSet":"/static/db7933e6a7f7acaf99a33f39b286974b/99d55/background_js.webp 256w,\n/static/db7933e6a7f7acaf99a33f39b286974b/3591c/background_js.webp 512w,\n/static/db7933e6a7f7acaf99a33f39b286974b/e306d/background_js.webp 1024w","type":"image/webp","sizes":"(min-width: 1024px) 1024px, 100vw"}]},"width":1024,"height":1024}},"publicURL":"/static/db7933e6a7f7acaf99a33f39b286974b/background_js.png"}}}}]}},"pageContext":{"slug":"/2021/2021-08-06-Singleton/"}},
    "staticQueryHashes": ["1479751003","1642645631","3590156278","363963755","3949884163","77750267","884297919"]}