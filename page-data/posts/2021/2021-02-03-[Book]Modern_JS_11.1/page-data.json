{
    "componentChunkName": "component---src-pages-custom-post-tsx",
    "path": "/posts/2021/2021-02-03-[Book]Modern_JS_11.1/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"1f7807c8-6ffa-5f48-8d14-65b62c215e5b","fields":{"slug":"/2021/2021-02-03-[Book]Modern_JS_11.1/"},"html":"<h1>책) 모던 자바스크립트 - 11장 프로미스와 비동기 프로그래밍 (1)</h1>\n<h2><strong>11.1</strong> 비동기 프로그래밍 배경 지식</h2>\n<ul>\n<li>\n<p><span style=\"color: green; font-weight: bold;\">자바스크립트</span> 엔진은 <strong>싱글 스레드 이벤트 루프 개념을 기반</strong>으로 한다.<br>\n싱글 스레드는 한 번에 한개의 코드만 실행된다는 의미.<br>\n<strong>여러 개의 스레드가 코드를 동시에 실행</strong>되도록 해주는 <span style=\"color: skyblue;\">Java</span>나 <span style=\"color: skyblue;\">C++</span> 같은 언어와 대조된다.</p>\n</li>\n<li>\n<p>자바스크립트 엔진은 한 번에 한 개의 코드만 실행할 수 있으므로 실행 예정인 코드를 추적할 필요가 있음.<br>\n<strong>1)</strong>  실행 예정인 코드는 작업큐에 유지, 코드는 실행될 준비가 될 때마다 작업큐에 추가된다.<br>\n<strong>2)</strong>  자바스크립트 엔진이 코드 실행을 마치면, 이벤트 루프는 큐에서 다음 작업을 꺼내 실행.<br>\n<strong>+</strong>  이벤트 루프는 자바스크립트 엔진 내의 프로세스이며, 코드 실행을 감시하고 작업큐를 관리한다.<br>\n<strong>+</strong>  큐처럼 첫 작업에서 마지막 작업까지 실행된다는 것을 명심!!</p>\n</li>\n</ul>\n</br>\n<h3><strong>11.1.1</strong> 이벤트 모델</h3>\n<ol>\n<li>\n<p>어떠한 사용자가 버튼을 클릭하거나 키보드의 키를 눌렀을 때 onClick 같은 이벤트가 발생하며,<br>\n이 이벤트는 작업큐의 맨 뒤에 새로운 작업을 추가하여 인터랙션에 응답할 것이다.<br>\n이는 자바스크립트의 가장 기초적인 비동기 프로그래밍 형태다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-btn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nbutton<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'클릭!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>이 코드는 <code class=\"language-text\">button</code>이 클릭될 때까지 실행되지 않을 것.<br>\n<code class=\"language-text\">button</code>이 클릭된다면, <code class=\"language-text\">onclick</code>에 할당된 함수는 작업큐의 뒤에 추가되고,<br>\n추가된 함수의 앞에 다른 작업들이 모두 완료된 후에 실행 됨.</li>\n</ul>\n</li>\n<li>\n<p>간단한 인터렉션을 위한 이벤트는 잘 동작하지만, 연결된 여러 개의 개별 비동기 호출은<br>\n각 이벤트에 대한 이벤트 타깃을 추적해야하기에 더욱 복잡함.<br>\n추가로 처음 이벤트가 발생하기 전에 적절한 이벤트 핸들러가 모두 추가되었는지도 보장할 필요가 있음.</p>\n</li>\n</ol>\n<br/>\n<h3><strong>11.1.2</strong> 콜백 패턴</h3>\n<ol>\n<li>\n<p>Node.js는 콜백을 대중화, 비동기 프로그래밍 모델을 발전 시킴</p>\n</li>\n<li>\n<p>콜백 패턴은 <strong>비동기 코드가 특정 시점까지 실행되지 않는다</strong>는 점에서 이벤트 모델과 유사<br>\n차이는 호출할 함수가 인자로 전달되는 점.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'exemple.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> contents</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>contents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hi!!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>이 코드는 Node.js의 에러 퍼스트 콜백 스타일 사용.</li>\n<li><code class=\"language-text\">readFile()</code>함수는 디스크에서 첫 인자에 명시된 파일을 읽도록 의도되었고,<br>\n작업이 완료되면 두번째 인자인 콜백을 실행.<br>\n만약 에러가 발생한다면 콜백의 <em>err</em> 인자는 에러 객체일 것!<br>\n그렇지않다? <em>contents</em> 인자는 문자열 파일 콘텐츠를 포함.</li>\n<li>콜백 패턴을 사용하면 <code class=\"language-text\">readFile()</code>은 <strong>즉시 실행되기 시작</strong>하고 <strong>디스크로부터 파일을 읽기 시작할때 멈춘다!</strong><br>\n즉, <code class=\"language-text\">readFile()</code>이 호출된 후, readFile의 콜백함수 안의 <code class=\"language-text\">console.log(contents)</code>가 출력되기 전에<br>\nreadFile의 스코프 밖에 있는 <code class=\"language-text\">console.log('Hi!!')</code>가 출력된다는 의미.</li>\n<li><code class=\"language-text\">readFile()</code>이 실행을 완료하면, 작업큐의 맨 뒤에 콜백 함수와 콜백 함수의 인자를 가진 새로운 작업이 추가되며,\n이 작업은 앞선 모든 다른 작업 완료 후 실행된다.</li>\n</ul>\n</li>\n<li>\n<p>콜백 패턴은 여러 개의 호출 연결이 쉬워서 이벤트보다 더 유연함.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'exemple.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> contents</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">writeFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'exemple.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'File was written!!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>이 함수는 <code class=\"language-text\">readFile()</code> 실행이 완료되면, 에러가 발생하지 않는 경우 <code class=\"language-text\">writeFile()</code> 함수를 호출하는 작업을 작업큐에 추가한다.<br>\n그러고 나서 <code class=\"language-text\">writeFile()</code> 실행이 완료되었을 때 작업을 작업큐에 추가한다.</li>\n<li>이 패턴은 <strong>콜백지옥</strong>에 빠질 수 있음.</li>\n</ul>\n</li>\n<li>\n<p>콜백지옥 예시</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">method1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">method2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">method3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token function\">method4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n\n                <span class=\"token function\">method5</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>딱봐도 드럽다.</li>\n<li>여러 개의 중첩된 메소드 호출은 이해하기 어려움, 디버깅도 어렵게 뒤얽힌 거미줄 같은 코드를 만듬.</li>\n</ul>\n</li>\n</ol>\n<hr/>\n<blockquote>\n<p>만약 두 개의 비동기 연산을 병렬로 실행하고 둘 다 완료되었을 때 결과를 알기 원한다면?<br>\n만약 두 개의 비동기 연산을 동시에 실행하지만 첫 번째 연산이 완료되었을 때 결과만 알기 원한다면?</p>\n<p>이런 경우, 여러 개의 콜백을 추적하고 연산을 정리할 필요가 있음.<br>\n<strong>프로미스</strong>는 이 문제를 크게 개선할 수 있다!</p>\n</blockquote>\n<hr>\n<h3><strong>참고 자료 및 책 링크</strong></h3>\n<ul>\n<li><a href=\"http://www.yes24.com/Product/Goods/56029935\" target=\"_blank\" rel=\"nofollow\">책 - 모던 자바스크립트 (니콜라스 자카스)</a></li>\n</ul>","frontmatter":{"title":"[JavaScript] 모던 자바스크립트 - 11장 프로미스와 비동기 프로그래밍 (1)","summary":null,"date":"2021.02.03.","categories":["JavaScript"],"options":null,"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACC0lEQVQ4y+2STWgTURDHp9ukrek2NZsPm2b3zXYlgh49VLCCBUEPOdajZw/ivUeVilBpxfpFFErQIuhFFL8QD16LtRaxB4vZbfO5SRtitdloPjYjm1YNJQEpHn0MD96895v5z5uB78tsxwb/4X8HFzXLGo+GtiN4I2rtpRgrqMxQ/wI2fr/TGGVwI8rWFiUzjdU0bgaFpgkrCaZ/EI8d2XUy5Pj2Waom8dpFYX/QLvrbR0KOxTf91QQaWjPY0JiZxNhcwMlzCtrMFD6a9gJAf1/70GAnAJw+xZOOhtoCriYxMS8Ku7mgYiMdR886ASBy00OkPL/rTS2I5bglsCUcfyf2Oq3MpOOdCTcAHNhnf3DLU8pgLS8X1RY1F9Q/cHDAVohanpGQA+prr2x7NuOjTDPZhmr1oxzHlbd1WLF/XZIqaSzn5CcR3/GjXQDAd3Pzr/yURtj2z7UsJt+LlJOzn6TeHgs2VJb9KM296KOKQqYyesaqf/K8i/IyNKqlLN6+7Oa726bGhBuXBAAYGuysxNmhgx0d9rarF4SX9/cMH7aSz1z30FoDbKiMdHwc8fbw3GZ5HAcPwx7Ky+FxwVl3cvWbE8Nd60vSjxW2XTatYnQ2EB4XpsZcC6/9tfow0aqszQamr7gnzrme3vMVllk50axVRY1VU0hfZFqXTX1rDIsaM385KSeXYlsz/xOJuKXQ2JEzDwAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/db7933e6a7f7acaf99a33f39b286974b/34104/background_js.png","srcSet":"/static/db7933e6a7f7acaf99a33f39b286974b/5ce94/background_js.png 256w,\n/static/db7933e6a7f7acaf99a33f39b286974b/8a20a/background_js.png 512w,\n/static/db7933e6a7f7acaf99a33f39b286974b/34104/background_js.png 1024w","sizes":"(min-width: 1024px) 1024px, 100vw"},"sources":[{"srcSet":"/static/db7933e6a7f7acaf99a33f39b286974b/99d55/background_js.webp 256w,\n/static/db7933e6a7f7acaf99a33f39b286974b/3591c/background_js.webp 512w,\n/static/db7933e6a7f7acaf99a33f39b286974b/e306d/background_js.webp 1024w","type":"image/webp","sizes":"(min-width: 1024px) 1024px, 100vw"}]},"width":1024,"height":1024}},"publicURL":"/static/db7933e6a7f7acaf99a33f39b286974b/background_js.png"}}}}]}},"pageContext":{"slug":"/2021/2021-02-03-[Book]Modern_JS_11.1/"}},
    "staticQueryHashes": ["1479751003","1642645631","3590156278","363963755","3949884163","77750267","884297919"]}