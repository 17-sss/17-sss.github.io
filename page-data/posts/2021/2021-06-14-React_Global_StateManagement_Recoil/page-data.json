{
    "componentChunkName": "component---src-pages-custom-post-tsx",
    "path": "/posts/2021/2021-06-14-React_Global_StateManagement_Recoil/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"62c88155-fc1d-5258-aa03-65e883e6daac","fields":{"slug":"/2021/2021-06-14-React_Global_StateManagement_Recoil/"},"html":"<h2>React의 또 다른 상태관리 라이브러리, Recoil</h2>\n<h3><strong>1.</strong> Recoil은 왜 만들어졌을까?</h3>\n<p><a href=\"https://recoiljs.org/ko/docs/introduction/motivation\" target=\"_blank\" rel=\"nofollow\">Recoil 공식 : 동기</a></p>\n<p>호환성 및 단순함을 이유로 외부의 글로벌 상태관리 라이브러리보다는 React 자체에 내장된 상태 관리 기능을 사용하는 것이 가장 좋음.<br>\n그러나 React는 다음과 같은 한계가 있다.</p>\n<ul>\n<li>컴포넌트의 상태는 공통된 상위요소까지 끌어올림으로써 공유될 수 있지만,<br>\n이 과정에서 거대한 트리가 다시 렌더링되는 효과를 야기하기도 함</li>\n<li>Context는 단일 값만 저장할 수 있으며, 자체 소비자(consumer)를 가지는 여러 값들의 집합을 담을 수는 없음.</li>\n<li>이 두가지 특성이 트리의 최상단(state가 존재하는 곳)부터 트리의 잎(state가 사용되는 곳)까지의<br>\n코드 분할을 어렵게 함.</li>\n</ul>\n<h3><strong>2.</strong> 주요 개념</h3>\n<p><a href=\"https://recoiljs.org/ko/docs/introduction/core-concepts\" target=\"_blank\" rel=\"nofollow\">Recoil 공식 : 주요 개념</a></p>\n<p>Recoil을 사용하면 atoms (공유 상태)에서 selectors (순수 함수)를 거쳐<br>\nReact 컴포넌트로 내려가는 data-flow graph를 만들 수 있음.</p>\n<ul>\n<li>Atoms는 컴포넌트가 구독할 수 있는 상태의 단위</li>\n<li>Selectors는 atoms 상태값을 동기 또는 비동기 방식을 통해 변환.</li>\n</ul>\n<p><strong>1)</strong> Atoms</p>\n<ul>\n<li>Atoms는 상태의 단위이며, 업데이트와 구독이 가능</li>\n<li>atom이 업데이트되면 각각의 구독된 컴포넌트는 새로운 값을 반영하여 다시 렌더링</li>\n<li>atoms는 런타임에서 생성될 수도 있다.</li>\n<li>Atoms는 React의 로컬 컴포넌트의 상태 대신 사용할 수 있다.</li>\n<li>동일한 atom이 여러 컴포넌트에서 사용되는 경우 모든 컴포넌트는 상태를 공유함.</li>\n</ul>\n<p><strong>1-1)</strong> <code class=\"language-text\">atom</code> 함수를 사용하여 Atom 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> fontSizeState <span class=\"token operator\">=</span> <span class=\"token function\">atom</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'fontSizeState'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token number\">14</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>Atoms는 디버깅, 지속성 및 모든 atoms의 map을 볼 수 있는 특정 고급 API에 사용되는 고유한 키가 필요.<br>\n2개 이상의 atom이 같은 키를 갖는 것은 오류이기 때문에 키값은 전역적으로 고유하도록 해야 함!</li>\n<li>React 컴포넌트의 상태처럼 기본값도 가짐!</li>\n</ul>\n<p><strong>1-2)</strong> <code class=\"language-text\">useRecoilState()</code>를 사용하여 생성한 atom을 읽고 씀</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FontButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>fontSize<span class=\"token punctuation\">,</span> setFontSize<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useRecoilState</span><span class=\"token punctuation\">(</span>fontSizeState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>button\n            onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setFontSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">size</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> size <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> fontSize <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">></span>\n            Click to Enlarge\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 위에서 생성한 FontButton 컴포넌트를 클릭하면 버튼의 글꼴 크기가 1만큼 증가하며,</span>\n<span class=\"token comment\">// fontSizeState atom을 사용하는 다른 컴포넌트(Text 컴포넌트)의 글꼴 크기도 같이 변화한다.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>fontSize<span class=\"token punctuation\">,</span> setFontSize<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useRecoilState</span><span class=\"token punctuation\">(</span>fontSizeState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>p style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> fontSize <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>This text will increase <span class=\"token keyword\">in</span> size too<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>위 예제에 나왔듯 React의 useState와 비슷하지만 <em>상태가 컴포넌트 간에 공유될 수 있다는 차이</em> 가 있음.</li>\n</ul>\n<p><strong>2)</strong> Selectors</p>\n<ul>\n<li>Selector는 atoms나 다른 selectors를 입력으로 받아들이는 순수 함수(pure function)\n<ul>\n<li>상위의 atoms 또는 selectors가 업데이트되면 하위의 selector 함수도 다시 실행됨.</li>\n<li>컴포넌트들은 selectors를 atoms처럼 구독할 수 있으며 selectors가 변경되면 컴포넌트들도 다시 렌더링됨.</li>\n</ul>\n</li>\n<li>Selectors는 상태를 기반으로 하는 파생 데이터를 계산하는 데 사용됨\n<ul>\n<li>최소한의 상태 집합만 atoms에 저장</li>\n<li>다른 모든 파생되는 데이터는 selectors에 명시한 함수를 통해<br>\n효율적으로 계산함으로써 쓸모없는 상태의 보존을 방지</li>\n</ul>\n</li>\n<li>Selectors는 어떤 컴포넌트가 자신을 필요로하는지, 또 자신은 어떤 상태에 의존하는지를 추적하기에<br>\n이러한 함수적인 접근방식을 매우 효율적으로 만듬!</li>\n<li>컴포넌트의 관점에서 보면 <em>selectors와 atoms는 동일한 인터페이스를 가지므로 서로 대체</em> 할 수 있다.</li>\n</ul>\n<p><strong>2-1)</strong> <code class=\"language-text\">selector</code> 함수를 사용하여 selector 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> fontSizeLabelState <span class=\"token operator\">=</span> <span class=\"token function\">selector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'fontSizeLabelState'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> get <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> fontSize <span class=\"token operator\">=</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>fontSizeState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> unit <span class=\"token operator\">=</span> <span class=\"token string\">'px'</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>fontSize<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>unit<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/* \n    이 예시에서 selector는 fontSizeState라는 하나의 atom에 의존성을 갖음.\n    개념적으로 fontSizeLabelState selector는 fontSizeState를 입력으로 사용하고\n    형식화된 글꼴 크기 레이블을 출력으로 반환하는 순수 함수처럼 동작함!\n*/</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">get</code> 속성은 계산될 함수\n<ul>\n<li>전달되는 <code class=\"language-text\">get</code> 인자를 통해 atoms와 다른 selectors에 접근할 수 있음.</li>\n<li>다른 atoms나 selecotrs에 접근하면 자동으로 종속 관계가 생성되므로<br>\n참조했던 다른 atoms나 selectors가 업데이트되면 이 함수도 다시 실행됨.</li>\n</ul>\n</li>\n</ul>\n<p><strong>2-2)</strong> <code class=\"language-text\">useRecoilValue()</code>를 사용하여 Selectors를 읽을 수 있음</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">FontButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>fontSize<span class=\"token punctuation\">,</span> setFontSize<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useRecoilState</span><span class=\"token punctuation\">(</span>fontSizeState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> fontSizeLabel <span class=\"token operator\">=</span> <span class=\"token function\">useRecoilValue</span><span class=\"token punctuation\">(</span>fontSizeLabelState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Current font size: $</span><span class=\"token punctuation\">{</span>fontSizeLabel<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">setFontSize</span><span class=\"token punctuation\">(</span>fontSize <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> fontSize <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                Click to Enlarge\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">useRecoilValue()</code>는 하나의 atom이나 selector를 인자로 받아 대응하는 값을 반환.\n<ul>\n<li>위 예시 코드에서는 <code class=\"language-text\">fontSizeLabelState</code> selector는 writable하지 않기 때문에<br>\n<code class=\"language-text\">useRecoilState()</code>를 이용하지 않는다</li>\n</ul>\n</li>\n</ul>\n<h3><strong>3.</strong> 주요 기능들 요약</h3>\n<ul>\n<li><code class=\"language-text\">RecoilRoot</code><br>\nrecoil 상태를 사용하는 컴포넌트는 부모 트리 어딘가에 나타나는 RecoilRoot 가 필요!<br>\n보통 App 컴포넌트가 RecoilRoot를 넣기에 가장 좋은 장소임!</li>\n<li><code class=\"language-text\">atom</code><br>\nAtoms는 상태의 단위이며, 업데이트와 구독이 가능</li>\n<li><code class=\"language-text\">selector</code><br>\natoms나 다른 selectors를 입력으로 받아들이는 순수 함수(pure function)</li>\n<li><code class=\"language-text\">useRecoilState</code><br>\n생성한 atom을 읽고 쓸 수 있음</li>\n<li><code class=\"language-text\">useRecoilValue</code><br>\n생성한 selector를 읽을 수 있음</li>\n</ul>\n<h3><strong>4.</strong> 아래 링크를 참고하여 설치하고 사용해보기!</h3>\n<ul>\n<li><a href=\"https://recoiljs.org/ko/docs/introduction/installation\" target=\"_blank\" rel=\"nofollow\">Recoil 공식 : 설치</a></li>\n<li><a href=\"https://recoiljs.org/ko/docs/introduction/getting-started\" target=\"_blank\" rel=\"nofollow\">Recoil 공식 : 시작하기</a></li>\n</ul>","frontmatter":{"title":"[상태관리] React의 또 다른 상태관리 라이브러리, Recoil","summary":null,"date":"2021.06.14.","categories":["JavaScript","State Management"],"options":null,"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABY0lEQVQoz6VRy0rDUBDNt/gD2ldE1FoV0aUbFwqiCylIfWKTtLTWSLsShCIFK9Y3UhC/Sm5uTJPUTzgyk6a2lSLFxTBz5nHm3LlKImdhVIsbYihWhjWNQvqLMExEdYHxrGAcMwQi2k8+jMkTDvPhbOiVXrIFU2L14pPxVMHCUtnm/Oyp5BrFi+cSqTOJmaKF9aqD6aKFmD6gkNRQ4eDew+ZVC4cPHrLPPrQXnz3hTMNDuu7iiGOXcbHZxlxJdhV3CSmRLEkUmm0cP3rIv/ow39rYqDrYa3hYu3QwlvnA7q2L5YqNeVOi/P7F/clhhPSs9I2LlYqNnWuX1RIB4ZMnn/FWrcUL9+88bNdarLLvyQbdkA6aCxJUmNCCQ0/mLaRMCTUf3JOUUI1uRySRTh9bhyPOCulTDGIPvGoEm6gxSj9LA7pATBNco6VkYV/vLCtUdQsqNbDviTvkf8YD80qib9P/7Rt+YUMItOg4DgAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/9980cff36b026f2e31b0c0f39738bbdf/8b696/background_recoil.png","srcSet":"/static/9980cff36b026f2e31b0c0f39738bbdf/98cbf/background_recoil.png 159w,\n/static/9980cff36b026f2e31b0c0f39738bbdf/1d9ac/background_recoil.png 317w,\n/static/9980cff36b026f2e31b0c0f39738bbdf/8b696/background_recoil.png 634w","sizes":"(min-width: 634px) 634px, 100vw"},"sources":[{"srcSet":"/static/9980cff36b026f2e31b0c0f39738bbdf/7532c/background_recoil.webp 159w,\n/static/9980cff36b026f2e31b0c0f39738bbdf/da46d/background_recoil.webp 317w,\n/static/9980cff36b026f2e31b0c0f39738bbdf/002fe/background_recoil.webp 634w","type":"image/webp","sizes":"(min-width: 634px) 634px, 100vw"}]},"width":634,"height":357}},"publicURL":"/static/9980cff36b026f2e31b0c0f39738bbdf/background_recoil.png"}}}}]}},"pageContext":{"slug":"/2021/2021-06-14-React_Global_StateManagement_Recoil/"}},
    "staticQueryHashes": ["1413268446","1479751003","1642645631","3590156278","3949884163","77750267","884297919"]}